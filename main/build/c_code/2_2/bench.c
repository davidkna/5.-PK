/* Generated by Nim Compiler v0.11.0 */
/*   (c) 2015 Andreas Rumpf */
/* The generated code is subject to the original license. */
#define NIM_INTBITS 64
#include "nimbase.h"

#include <string.h>
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
struct  TGenericSeq  {
NI len;
NI reserved;
};
struct  NimStringDesc  {
  TGenericSeq Sup;
NIM_CHAR data[SEQ_DECL_SIZE];
};
N_NIMCALL(NIM_BOOL, nosexistsDir)(NimStringDesc* dir);
N_NIMCALL(void, noscreateDir)(NimStringDesc* dir);
N_NIMCALL(NIM_BOOL, nosexistsFile)(NimStringDesc* filename);
static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src);
N_NIMCALL(NimStringDesc*, rawNewString)(NI space);
N_NIMCALL(void, createfile_129068)(NimStringDesc* filename);
N_NIMCALL(NI, countlines_129032)(NimStringDesc* filename);
STRING_LITERAL(TMP33, "testData", 8);
STRING_LITERAL(TMP40, "testData/", 9);

static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src) {
	memcpy(((NCSTRING) ((&(*dest).data[((*dest).Sup.len)- 0]))), ((NCSTRING) ((*src).data)), (NI)((*src).Sup.len + ((NI) 1)));
	(*dest).Sup.len += (*src).Sup.len;
}

N_NIMCALL(NI, preparebench_131012)(NimStringDesc* filename, NI times, NI step) {
	NI result;
	result = 0;
	{
		NIM_BOOL LOC3;
		LOC3 = 0;
		LOC3 = nosexistsDir(((NimStringDesc*) &TMP33));
		if (!!(LOC3)) goto LA4;
		noscreateDir(((NimStringDesc*) &TMP33));
	}
	LA4: ;
	{
		NimStringDesc* LOC8;
		NIM_BOOL LOC9;
		NimStringDesc* LOC12;
		LOC8 = 0;
		LOC8 = rawNewString(filename->Sup.len + 9);
appendString(LOC8, ((NimStringDesc*) &TMP40));
appendString(LOC8, filename);
		LOC9 = 0;
		LOC9 = nosexistsFile(LOC8);
		if (!!(LOC9)) goto LA10;
		LOC12 = 0;
		LOC12 = rawNewString(filename->Sup.len + 9);
appendString(LOC12, ((NimStringDesc*) &TMP40));
appendString(LOC12, filename);
		createfile_129068(LOC12);
		result = ((NI) 1);
	}
	goto LA6;
	LA10: ;
	{
		NimStringDesc* LOC14;
		NI LOC15;
		LOC14 = 0;
		LOC14 = rawNewString(filename->Sup.len + 9);
appendString(LOC14, ((NimStringDesc*) &TMP40));
appendString(LOC14, filename);
		LOC15 = 0;
		LOC15 = countlines_129032(LOC14);
		result = (NI)((NI)(LOC15 / times) + ((NI) 1));
		{
			NIM_BOOL LOC18;
			LOC18 = 0;
			LOC18 = (((NI) 10000) < result);
			if (!(LOC18)) goto LA19;
			LOC18 = !((step == ((NI) 1)));
			LA19: ;
			if (!LOC18) goto LA20;
			result = (NI)((NI)((NI)(result - ((NI) 10000)) * step) + ((NI) 10000));
		}
		LA20: ;
	}
	LA6: ;
	return result;
}
NIM_EXTERNC N_NOINLINE(void, HEX00_benchInit)(void) {
}

NIM_EXTERNC N_NOINLINE(void, HEX00_benchDatInit)(void) {
}

